<p style="color: green"><%= notice %></p>

<h1 class="mb-5">Users</h1>

<div id="users"  data-controller="users-bulk">
  <%= link_to "Delete All Selected", "#", data: { action: "click->users-bulk#destroy" }, class: 'btn btn-small btn-danger mb-3' %>
  <hr />

  <%= search_form_for @q, class: 'mb-3' do |f| %>
    <%= f.label :first_name_cont %>
    <%= f.search_field :first_name_cont %>

    <%= f.label :last_name_cont %>
    <%= f.search_field :last_name_cont %>

    <%= f.label :email_cont %>
    <%= f.search_field :email_cont %>

    <%= f.label :gender_eq, "Gender" %>
    <%= f.select :gender_eq, [['Male', 'male'], ['Female', 'female']], include_blank: true %>

    <%= f.label :age_eq, "Age" %>
    <%= f.select :age_eq, options_for_select((1..100).to_a), include_blank: true  %>

    <%= f.submit class: 'btn btn-secondary' %>
  <% end %>

  <table class="table table-striped">
    <tr>
      <th>
        <%= check_box_tag nil, nil, false, data: { users_bulk_target: "checkboxAll" } %> Select All
      </th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Domain</th>
      <th>Age</th>
      <th>Gender</th>
      <th colspan="3"></th>
    </tr>
    <% @users.each do |user| %>
      <tr>
        <td>
          <%= check_box_tag "user_ids[]", user.id, false, data: { users_bulk_target: "checkbox" } %>
        </td>
        <td><%= user.first_name %></td>
        <td><%= user.last_name %></td>
        <td><%= user.email %></td>
        <td><%= user.domain %></td>
        <td><%= user.age %></td>
        <td><%= user.gender %></td>
        <td>
          <%= link_to "Show", user, data: { turbo_frame: 'modal' } %>
        </td>
        <td>
          <%= link_to "Edit", edit_user_path(user), data: { turbo_frame: 'modal' } %>
        </td>
        <td>
          <%= button_to "Destroy", user, method: :delete, class: 'btn btn-link' %>
        </td>
      </tr>
    <% end %>
  </table>

  <%== pagy_bootstrap_nav(@pagy) %>
</div>

<%= link_to "New user", new_user_path, class: 'btn btn-primary mt-3' %>
